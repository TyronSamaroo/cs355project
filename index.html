<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="index.js" defer></script>
    <link rel="stylesheet" type="text/css" href="index.css">
    <title>Project</title>
</head>

<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand" href="index.html">Internet and Web Tech</a>
            </div>
            <div>
                <ul class="nav navbar-nav">
                    <li class="active"><a href="index.html">Home</a></li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Browser
              <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="browser.html#Navigator">Navigator</a></li>
                            <li><a href="browser.html#Window">Window</a></li>
                            <li><a href="browser.html#Screen">Screen</a></li>
                            <li><a href="browser.html#Location">Location</a></li>
                            <li><a href="browser.html#Geolocation">Geolocation</a></li>
                        </ul>
                    </li>

                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Course
              <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="https://www.zybooks.com" target="_blank">Zybook</a></li>
                            <li><a href="https://tophat.com/" target="_blank">TopHat</a></li>
                            <li><a href="https://tinyurl.com/CSCI355-Fall2019" target="_blank">Course Google Drive</a></li>
                            <li><a href="https://www.w3schools.com/" target="_blank">W3Schools</a></li>
                        </ul>

                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">About
              <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                            <li><a href="aboutme.html">Developer</a></li>
                            <li><a href="contact.html">Contact Us</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
<!-- 
    <form action="Test1.asp">
        <input type="button" value="Upload" onclick="clickUpload();" />
        <input type="button" value="Download" onclick="clickDownload();" />
        <form id="UploadForm" action="test3.asp" enctype="multipart/form-data">
            <input type="file" id="UploadFile" onchange="MakeUpload();" style="display:all" />
        </form>
        <form id="DownloadForm" action="Test4.asp">
        </form>
    </form> -->
    <div>
        <input type="file" id="myFile" onchange= "displayFile()">

    </div>
    <div style="text-align: center;padding: 20%"> 
            
            <h1 id="searchtitle">SEARCH HERE</h1>
            <form id="search-param">
                <input id="searchfield" type="text" placeholder="Search..">
                <input class ="btn btn-primary" type="submit" value="Submit">

            </form> 
            <hr>
            <div id="output"></div>
    </div>
    

    </div>
          
   <script>
       function displayFile(){
           
           var file = document.getElementById('myFile');
           console.log(file.files.item(0).name);
           var filename = file.files.item(0).name;
           let url =`${filename}`;
           fetch(url)
           .then(res => res.text())
           .then(data =>{
               console.log(data);

               let parser = new DOMParser();
               let xml = parser.parseFromString(data,"application/xml");
               //document.getElementById('output').textContent = data;
               console.log(xml)
               results(xml);
           });
           output = `
            <a href="${file.files.item(0).name}" target="_blank">${file.files.item(0).name}</a>
           `
           document.getElementById('output').innerHTML = output;
       }
       function results(xml){
           let title = document.getElementById('title');
           let url = document.getElementById('url');
           let discription = document.getElementById('discription');
           //console.log(title.firstChild.nodeValue);
       }
       
   
   </script>
    
    
    
    <script>
        document.getElementById('search-param').addEventListener('submit',getResults);
        function getResults(e){
            e.preventDefault();
            let q = document.getElementById('searchfield').value;
            output = ``;
            fetch(`https://www.googleapis.com/customsearch/v1?cx=005328335594563973105:loxqirrkk08&key=AIzaSyCQ2Wnm30rrgRQ1Zknyk1XGAYljRYlo6do&q=${q}`)
                .then((res) =>res.json())
                .then((data) => {
                    console.log(data.items);
                    data.items.forEach(search =>{
                        output += `
                        <div>
                            
                            
                            <ul class= "list-group list-group-flush mb-3"> 
                                <li>
                                    <span>
                                        <input type="checkbox" name="searchfiles" value=searchfiles>     
                                    </span>    
                                    
                                </li>
                                <li class="list-group-item"> ${search.title} </li>
                                <li class="list-group-item"> 
                                        <a href="${search.link}" target="_blank">${search.link}</a>
                                </li>
                            </ul>
                        </div>
                        `;
                    })
                    document.getElementById('output').innerHTML = output;
                })
        
        }    
    </script>
</body>

</html>